package org.ccloud.workflow.query;

import org.ccloud.workflow.model.ActReProcdef;

import com.jfinal.plugin.activerecord.Page;

/**
 * Generated by JFinal.
 */
public class ActReProcdefQuery {
	
	protected static final ActReProcdef DAO = new ActReProcdef();
	private static final ActReProcdefQuery QUERY = new ActReProcdefQuery();
	
	public static ActReProcdefQuery me() {
		return QUERY;
	}
	
	/***
	 * 查询分页
	 * @param curr
	 * @param pagesize
	 * @return
	 */
	public Page<ActReProcdef> getDefPage(Integer pageNumber , Integer pageSize) {
		
		String select = "select def.*, dep.DEPLOY_TIME_";
		StringBuilder fromBuilder = new StringBuilder("from `act_re_procdef` def ");
		fromBuilder.append("left join `act_re_deployment` dep on def.DEPLOYMENT_ID_=dep.ID_ ");
		fromBuilder.append("ORDER BY VERSION_ DESC");
		
		return DAO.paginate(pageNumber, pageSize, select, fromBuilder.toString());
	}
}
