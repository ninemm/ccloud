<#include "_inc/_layout.html"/> 
<#macro script_import>
<script type="text/javascript" src="${CPATH}/templates/datacenter/js/topHovertree.js"></script>
</#macro>

<#macro css_import>
<link rel="stylesheet" href="${CPATH}/static/bootstrap/css/bootstrap.min.css">
</#macro>

<#macro css> 
    .table{ font-size:0.6rem; } 
    th { text-align:
center; vertical-align: middle!important; } 
</#macro>

<#macro script>

	$('#goback').on('click', function() { historyUtils.back(); });
	initTopHoverTree("gotop", 100, 10, 50);
	
	//共通post
    function post(URL, PARAMS)
    { 
	    var temp = document.createElement("form"); 
	    temp.action = URL; 
	    temp.method = "post"; 
	    temp.style.display = "none"; 
	    for (var x in PARAMS)
	    { 
		    var opt = document.createElement("textarea"); 
		    opt.name = x; 
		    opt.value = PARAMS[x]; 
		    temp.appendChild(opt); 
	    } 
	    document.body.appendChild(temp); 
	    temp.submit(); 
	    return temp; 
    }
    
    function search(provName,cityName,countryName,dateType){
        post('${CPATH}/sales/productByAreaList', {"provName" : provName, "cityName" : cityName, "countryName" : countryName, "dateType" : dateType});
    }
</#macro> 

<@layout>
<section>
	<header class="wy-header">
		<div id="goback" class="wy-header-icon-back">
			<span></span>
		</div>
		<div id="date-title" class="wy-header-title">区域销售情况</div>
	</header>
	<table class="table table-striped table-bordered">
		<tr>
			<th>区域</th>
			<th>产品</th>
			<th>金额(万元)</th>
		</tr>
		<#list rows as row> <#list row as ro> <#if ro_index == 0>
		<tr>
			<#if provName == ''>
			<td rowspan="${row?size}"
				style="text-align: center; vertical-align: middle;"><span
				onclick="search('${ro.provName?js_string}','','','${dateType!?js_string}')">${ro.provName!}${ro.cityName!}${ro.countryName!}</span></td>
			<#elseif cityName == ''>
			<td rowspan="${row?size}"
				style="text-align: center; vertical-align: middle;"><span
				onclick="search('${provName?js_string}','${ro.cityName?js_string}','','${dateType!?js_string}')">${ro.provName!}${ro.cityName!}${ro.countryName!}</span></td>
			<#else>
			<td rowspan="${row?size}"
				style="text-align: center; vertical-align: middle;">${ro.provName!}${ro.cityName!}${ro.countryName!}</td>
			</#if>
			<td>${ro.cInvName}</td>
			<td class="t-r">${ro.totalAmount}</td>
		</tr>
		<#else>
		<tr>
			<td>${ro.cInvName}</td>
			<td class="t-r">${ro.totalAmount}</td>
		</tr>
		</#if> </#list> </#list>
	</table>
</section>
<span id="gotop" title="返回顶部"><i class="icon-arrow-up2"></i>
</div> </@layout> 