<#include "../_inc/_layout.html"/>

<#macro script_import>
	<!-- bootstrapvalidator -->
 	<script src="${CPATH}/static/plugins/bootstrapvalidator/bootstrapValidator.js"></script>
 	<script src="${CPATH}/static/ladda/spin.min.js"></script>
	<script src="${CPATH}/static/ladda/ladda.min.js"></script>
	<script src="${CPATH}/static/plugins/datetimepicker/bootstrap-datetimepicker.min.js"></script>
	<script src="${CPATH}/static/plugins/datetimepicker/bootstrap-datetimepicker.zh-CN.js"></script>
</#macro>

<#macro css_import>
	<!-- bootstrapvalidator -->
    <link rel="stylesheet" href="${CPATH}/static/plugins/bootstrapvalidator/bootstrapValidator.css">
    <link rel="stylesheet" href="${CPATH}/static/ladda/ladda-themeless.min.css">
</#macro>
 
<#macro script>

var $form = $("#form");

$(function() {
	jQuery.mm.initDatetimepicker(null, '#purchaseTime', 'purchaseTime', 'yyyy-MM-dd', 2, 4, 2);

	$("#synchronize_category").on("click", function() {
		$form.attr("action", "/admin/jp/info/synchronize/pullGoodsCategories");
		$form.ajaxSubmit({
			type : "post", 
			dataType : "json", 
			success : function(data) { 
				if (data.errorCode == 0) {
					toastr.success(data.message, '商品类别同步成功');
				} else {
					toastr.error(data.message,'商品类别同步失败');
				}
			},
			error : function() {
				alert("商品类别同步失败");
			}
		});
	});
	
	$("#synchronize_product").on("click", function() {
		$form.attr("action", "/admin/jp/info/synchronize/pullProducts");
		$form.ajaxSubmit({
			type : "post", 
			dataType : "json", 
			success : function(data) { 
				if (data.errorCode == 0) {
					toastr.success(data.message, '产品信息同步成功');
				} else {
					toastr.error(data.message,'产品信息同步失败');
				}
			},
			error : function() {
				alert("产品信息同步失败");
			}
		});
	});
	
	$("#synchronize_seller").on("click", function() {
		$form.attr("action", "/admin/jp/info/synchronize/pullSellers");
		$form.ajaxSubmit({
			type : "post", 
			dataType : "json", 
			success : function(data) { 
				if (data.errorCode == 0) {
					toastr.success(data.message, '经销商信息同步成功');
				} else {
					toastr.error(data.message,'经销商信息同步失败');
				}
			},
			error : function() {
				alert("经销商信息同步失败");
			}
		});
	});
	
	$("#synchronize_seller_account").on("click", function() {
		$form.attr("action", "/admin/jp/info/synchronize/pullSellerAccounts");
		$form.ajaxSubmit({
			type : "post", 
			dataType : "json", 
			success : function(data) { 
				if (data.errorCode == 0) {
					toastr.success(data.message, '经销商账套同步成功');
				} else {
					toastr.error(data.message,'经销商账套同步失败');
				}
			},
			error : function() {
				alert("经销商账套同步失败");
			}
		});
	});
	
	$("#synchronize_purchase_stockIn").on("click", function() {
		$form.attr("action", "/admin/jp/info/synchronize/pullPurchaseStockIns");
		$form.ajaxSubmit({
			type : "post", 
			dataType : "json", 
			success : function(data) { 
				if (data.errorCode == 0) {
					toastr.success(data.message, '采购入库单同步成功');
				} else {
					toastr.error(data.message,'采购入库单同步失败');
				}
			},
			error : function() {
				alert("采购入库单同步失败");
			}
		});
	});
});
</#macro>

<@layout active_id=p child_active_id=c>

<!-- Content Header (Page header) -->
<section class="content-header">
	<h1>劲牌信息</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
       	<li><a href="#">劲牌信息</a></li>
       	<li class="active">劲牌信息同步</li>
	</ol>
</section>
<!-- Main content -->
<section class="content">
	<div class="box box-default">
		<div class="box-header with-border">
			<h3 class="box-title">劲牌信息同步</h3>
			<div class="box-tools">
				<button type="button" class="btn btn-box-tool" data-widget="collapse">
					<i class="fa fa-minus"></i>
				</button>
			</div>
		</div>
		<form action="" method="post" id="form" class="form-horizontal" >
		<div class="box-footer"> 
			<button type="button" id="synchronize_category" class="btn btn-sm bg-olive btn-flat ladda-button" data-style="expand-right">商品分类</button>
			<button type="button" id="synchronize_product" class="btn btn-sm bg-olive btn-flat ladda-button" data-style="expand-right">产品信息</button>
			<button type="button" id="synchronize_seller" class="btn btn-sm bg-olive btn-flat ladda-button" data-style="expand-right">经销商信息</button>
			<button type="button" id="synchronize_seller_account" class="btn btn-sm bg-olive btn-flat ladda-button" data-style="expand-right">经销商账套</button>
		</div>
		
		<div class="box-body">
			<div class="form-group col-sm-12 validata-box">
				<label class="control-label col-sm-2">采购单时间:</label>
				<div class="input-group col-md-4 col-sm-10">
					<input class="form-control" id="purchaseTime" name="purchaseTime" value="" placeholder="采购单时间">
				</div>
			</div>
		</div>
		<div class="box-footer"> 
			<button type="button" id="synchronize_purchase_stockIn" class="btn btn-sm bg-olive btn-flat ladda-button" data-style="expand-right">采购入库单</button>
		</div>
	</form>
	</div>
</section>

</@layout>