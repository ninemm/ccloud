<#include "../_inc/_layout.html"/>

<#macro script_import>

	<script src="${CPATH}/static/plugins/bootstrap-table/tableExport.js"></script>
	<script src="${CPATH}/static/plugins/bootstrap-table/bootstrap-table-export.js"></script>
	<script src="${CPATH}/static/plugins/bootstrap-table/bootstrap-table.js"></script>
	<script src="${CPATH}/static/plugins/bootstrap-table/bootstrap-table-zh-CN.js"></script>
	<script src="${CPATH}/static/plugins/datetimepicker/bootstrap-datetimepicker.min.js"></script>
	<script src="${CPATH}/static/plugins/datetimepicker/bootstrap-datetimepicker.zh-CN.js"></script>
	<script src="${CPATH}/static/plugins/bootstrapvalidator/bootstrapValidator.js"></script>
	<script src="${CPATH}/static/plugins/datatables/jquery.dataTables.js"></script>
	<script src="${CPATH}/static/plugins/datatables/jquery.dataTables.bootstrap.js"></script>
	<script src="${CPATH}/static/plugins/datatables/dataTables.select.js"></script>
	<script src="${CPATH}/static/plugins/datatables/dataTables.buttons.min.js"></script>
	<script src="${CPATH}/static/plugins/datatables/jszip.js"></script>
	<script src="${CPATH}/static/plugins/datatables/buttons.html5.min.js"></script>

</#macro>

<#macro css_import>

<link rel="stylesheet" href="${CPATH}/static/plugins/bootstrap-table/bootstrap-table.css">
<link rel="stylesheet" href="${CPATH}/static/plugins/datetimepicker/bootstrap-datetimepicker.min.css">
<link rel="stylesheet" href="${CPATH}/static/plugins/bootstrapvalidator/bootstrapValidator.css">
<link rel="stylesheet" href="${CPATH}/static/plugins/datatables/jquery.dataTables.min.css" />
<link rel="stylesheet" href="${CPATH}/static/plugins/datatables/buttons.dataTables.min.css" />
</#macro>
<#macro script>	
	$(function() {
		jQuery.mm.initDatetimepicker('form', '#startDate', 'startDate', 'yyyy-MM-dd', 2, 4, 2);
		jQuery.mm.initDatetimepicker('form', '#endDate', 'endDate', 'yyyy-MM-dd', 2, 4, 2);
		jQuery.mm.initValidator('#form', validatorFields);
		$('#datatable1').DataTable({  
			"searching" : false, 
	        "bSort": false,  
	        "paging": false,   
	        "info": false,  
		    dom: "<'toolbar'>Bfrtip",  
	        buttons: [{  
	            extend: 'excelHtml5',  
	            text: "导出",  
	            className: "btn-sm",  
	            customize: function(xlsx) {  
	                var sheet = xlsx.xl.worksheets['sheet1.xml'];  
	                $('row c[r^="C"]', sheet).attr('s', '2');  
	            }  
	        }],  
		});
		$('#datatable2').DataTable({  
			"searching" : false, 
	        "bSort": false,  
	        "paging": false,   
	        "info": false,  
		    dom: "<'toolbar'>Bfrtip",  
	        buttons: [{  
	            extend: 'excelHtml5',  
	            text: "导出",  
	            className: "btn-sm",  
	            customize: function(xlsx) {  
	                var sheet = xlsx.xl.worksheets['sheet1.xml'];  
	                $('row c[r^="C"]', sheet).attr('s', '2');  
	            }  
	        }],  
		})
	});
	
	function orderTime(){
		$('#post-search-input').val("so.create_date");
		var startDate= $('#startDate').val();
		var endDate= $('#endDate').val();
		window.location.href="${CPATH}/admin/report/mSellerDetail?startDate="+startDate+"&endDate="+endDate+"&k=so.create_date&c=${c!}&p=${p!}"
	};
	
	function prints(){
		$('#post-search-input').val("so.print_time");
		var startDate= $('#startDate').val();
		var endDate= $('#endDate').val();
		window.location.href="${CPATH}/admin/report/mSellerDetail?startDate="+startDate+"&endDate="+endDate+"&k=so.print_time&c=${c!}&p=${p!}"
	};
	
	function complete(){
		$('#post-search-input').val("sok.create_date");
		var startDate= $('#startDate').val();
		var endDate= $('#endDate').val();
		window.location.href="${CPATH}/admin/report/mSellerDetail?startDate="+startDate+"&endDate="+endDate+"&k=sok.create_date&c=${c!}&p=${p!}"
	};
	var validatorFields = {
		'startDate': {
			validators: {
				date : { format : 'YYYY-MM-DD', message : '日期格式不正确' }
			}
		},
		'endDate': {
			validators: {
				date : { format : 'YYYY-MM-DD', message : '日期格式不正确' }
			}
		}
	}
</#macro>
<@layout active_id=p child_active_id=c>

<section class="content-header">
	<h1>我部门的直营商详情</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
       	<li><a href="#">报表查询</a></li>
       	<li class="active">我部门的直营商详情</li>
	</ol>
</section>
<!-- Main content -->
<section class="content">
	<form class="form-inline" id="form" >
		<div class="row content-row">
			<div class="form-group col-sm-12" style="float: right">
				<input id="post-search-input" class="form-control" type="hidden" value="${k!'so.create_date'}" name="k" >&nbsp;
				<input onclick="orderTime()" class="btn btn-sm btn-primary" type="button" value="已下单查询">
				<input onclick="prints()" class="btn btn-sm btn-primary" type="button" value="已打印查询">
				<input onclick="complete()" class="btn btn-sm btn-primary" type="button" value="已出库查询">
				<div class="form-group validata-box">
					<label class="control-label">开始时间:</label>
					<div class="form-group">
						<input id="startDate" class="form-control" value="${startDate!}" name="startDate" placeholder="开始日期" >&nbsp;
					</div>
				</div>
				<div class="form-group validata-box">
					<label class="control-label">结束时间:</label>
					<div class="form-group">
						<input id="endDate" class="form-control" value="${endDate!}" name="endDate" placeholder="结束日期" >&nbsp;
					</div>
				</div>
			</div>
		</div>
		<div class="box" style="overflow:auto">
			<div class="box-body jp-common-pad">
				<table class="table table-striped"  id="datatable1" style="border:0px">
					<thead>
						<tr>
							<#if watchHead??>
								<#list watchHead as bean>
										<th style="text-align:center;min-width: 100px">${bean}</th>
								</#list>
							 </#if>
						</tr>
					</thead>
					<tbody>
						<#if mSellerDetailReportList.size() gt 0>
							<#list mSellerDetailReportList as bean>
								<tr class="jp-onmouse">
									<#list bean as value>
										<td align=center>${value}</td>
									</#list>
								</tr>
							</#list>
							<#else>
								<tr class="jp-onmouse" >
									<td colspan="${watchHead?size}" align=center>
										数据为空
									</td>
								</tr>
						 </#if>
					</tbody>
				</table>
			</div>
		</div>
		<h2>赠品统计</h2>
		<div class="box" style="overflow:auto">
			<div class="box-body jp-common-pad">
				<table class="table table-striped"  id="datatable2" style="border:0px">
					<thead>
						<tr>
							<#if watchHead??>
								<#list watchHead as bean>
										<th style="text-align:center;min-width: 100px">${bean}</th>
								</#list>
							</#if>
						</tr>
					</thead>
					<tbody>
						<#if mSellerDetailGiftReportList.size() gt 0>
							<#list mSellerDetailGiftReportList as bean1>
								<tr class="jp-onmouse">
									<#list bean1 as value1>
										<td align=center>${value1}</td>
									</#list>
								</tr>
							</#list>
							<#else>
								<tr class="jp-onmouse" >
									<td colspan="${watchHead?size}" align=center>
										数据为空
									</td>
								</tr>
						 </#if>
					</tbody>
				</table>
			</div>
		</div>
	</form>
</section>

</@layout>